jQuery(function($){$menu=$("#menu"),$menuTop=$("#menu-top"),$dialog=$(".window"),$mainNav=$menu.find("ul:first"),$menuItems=$mainNav.children("li");var Menu=function(){var init=function(){initAddClassMenu();initEffectsMenu()},initAddClassMenu=function(){$menu.find(".menu > li").addClass("menu-item");$menu.find(".menu > li:nth-child(3n+1)").addClass("orange");$menu.find(".menu > li:nth-child(3n+2)").addClass("lime");$menu.find(".menu > li:nth-child(3n)").addClass("green");$menu.find(".menu > li > ul").addClass("submenu")},initEffectsMenu=function(){$menuItems.hover(efectHover,efectleave)},efectHover=function(){var height=60;var count=$(this).children().length;var heightSub=$(this).children(".submenu").height();var expandedHeigh=height+heightSub;if(count>1){$(this).stop().animate({height:expandedHeigh+"px",background:"red"},500)}},efectleave=function(){$(this).stop().animate({height:"40px"},500)};return{init:init}}();var MenuTop=function(){var init=function(){initAddClassMenu();initEventsMenuTop();closeDialogEvents()},initAddClassMenu=function(){$menuTop.find(".menu > li").addClass("menu-item");$menuTop.find(".menu > li > ul").addClass("submenu")},initEventsMenuTop=function(){$('<button type="button" id="menutoggle" class="navtoogle" aria-hidden="true"><i aria-hidden="true" class="icon-menu"> </i> Menu</button>').insertBefore($menuTop.find(".menu"));$('<li class="menu-item"><a href="../../index.php">Home</a></li>').insertBefore($menuTop.find(".menu > li:first"));$menuTop.find("#menutoggle").on("click",function(e){changeClass(this,"navtoogle active","navtoogle")});$menuTop.find(".menu-top-item").on("click",function(e){if(e.currentTarget.id=="reservation"){if($("#reservationbox #dialog").css("display")=="none"){$(".window").fadeOut(200);$("#reservationbox #dialog").fadeIn(200)}}if(e.currentTarget.id=="call"){if($("#callbox #dialogC").css("display")=="none"){$(".window").fadeOut(200);$("#callbox #dialogC").fadeIn(200)}}if(e.currentTarget.id=="contact"){if($("#contactbox #dialogT").css("display")=="none"){$(".window").fadeOut(200);$("#contactbox #dialogT").fadeIn(200)}}})},changeClass=function(r,className1,className2){var regex=new RegExp("(?:^|\\s+)"+className1+"(?:\\s+|$)");if(regex.test(r.className)){r.className=r.className.replace(regex," "+className2+" ")}else{r.className=r.className.replace(new RegExp("(?:^|\\s+)"+className2+"(?:\\s+|$)")," "+className1+" ")}return r.className},closeDialogEvents=function(){$dialog.find(".close").on("click",function(e){e.preventDefault();$dialog.fadeOut(200);limpiaForm($("#reservationFormTour"));limpiaForm($("#reservationFormTrans"));limpiaForm($("#contactForm"));limpiaChosen()})};return{init:init}}();Menu.init();MenuTop.init();$.validator.setDefaults({ignore:":hidden:not(select)"});$.getJSON("/helpers/activities.php",function(data){var items=[];var select=$("#Activitie").empty();$.each(data,function(i,item){select.append('<option value="'+$.trim(item.title)+'">'+item.title+"</option>")});$(".chosen-select").trigger("chosen:updated")});$(".chosen-select").chosen();$("#formulario #option").on("change",function(e){if($(this).val()=="tour"){$("#formulario").find("#reservationFormTour").show();$("#formulario").find("#reservationFormTrans").hide()}if($(this).val()=="transport"){$("#formulario").find("#reservationFormTour").hide();$("#formulario").find("#reservationFormTrans").show()}});$("#date").datepicker();$("#dateP").datepicker();$("#reservationFormTour").validate({rules:{Activitie:{required:true},category:{required:true},Adults:{required:true,number:true}},submitHandler:function(form){var formInput=$("#reservationFormTour").serializeArray();var url="/helpers/reservation.php";$.post(url,formInput,function(data){console.log(data);limpiaForm($("#reservationFormTour"));limpiaChosen();if(data=="ok")$(".mensaje").html('<span class="ok">Reservation sent successfully</span>');else $(".mensaje").html('<span class="error">Error sending the reservation</span>');setTimeout(function(){$(".mensaje").fadeOut(200,function(){$(".mensaje span").remove();$(".mensaje").show()})},2e3)})}});$("#reservationFormTrans").validate({rules:{passengers:{required:true}},submitHandler:function(form){var formInput=$("#reservationFormTrans").serializeArray();var url="/helpers/reservation.php";$.post(url,formInput,function(data){console.log(data);limpiaForm($("#reservationFormTrans"));limpiaChosen();if(data=="ok")$(".mensaje").html('<span class="ok">Reservation sent successfully</span>');else $(".mensaje").html('<span class="error">Error sending the reservation</span>');setTimeout(function(){$(".mensaje").fadeOut(200,function(){$(".mensaje span").remove();$(".mensaje").show()})},2e3)})}});$("#contactForm").validate({rules:{comments:{required:true}},submitHandler:function(form){var formInput=$("#contactForm").serializeArray();var url="/helpers/contact.php";$.post(url,formInput,function(data){console.log(data);limpiaForm($("#contactForm"));if(data=="ok")$(".mensaje").html('<span class="ok">Comments sent successfully</span>');else $(".mensaje").html('<span class="error">Error sending the comments</span>');setTimeout(function(){$(".mensaje").fadeOut(200,function(){$(".mensaje span").remove();$(".mensaje").show()})},2e3)})}});function limpiaChosen(){$("#Activitie").val("").trigger("chosen:updated");$("#category").val("").trigger("chosen:updated");$("#Adults").val("").trigger("chosen:updated");$("#Childrens").val("").trigger("chosen:updated");$("#passengers").val("").trigger("chosen:updated")}function limpiaForm(miForm){$(":input",miForm).each(function(){var type=this.type;var tag=this.tagName.toLowerCase();if(type=="text"||type=="password"||type=="email"||tag=="textarea")this.value="";else if(type=="checkbox"||type=="radio")this.checked=false;else if(tag=="select")this.selectedIndex=-1})}$(".tabs li").on("click",function(e){e.preventDefault();if(e.currentTarget.id=="intro"){if($("#content-article").find("article.intro").css("display")=="none"){$("#content-article article").hide();$("#content-article").find("article.intro").fadeIn(500)}}if(e.currentTarget.id=="details"){if($("#content-article").find("article.details").css("display")=="none"){$("#content-article article").hide();$("#content-article").find("article.details").fadeIn(500)}}if(e.currentTarget.id=="rates"){if($("#content-article").find("article.rates").css("display")=="none"){$("#content-article article").hide();$("#content-article").find("article.rates").fadeIn(500)}}if(e.currentTarget.id=="map"){if($("#content-article").find("article.map").css("display")=="none"){$("#content-article article").hide();$("#content-article").find("article.map").fadeIn(500)}}if(e.currentTarget.id=="seasons"){if($("#content-article").find("article.seasons").css("display")=="none"){$("#content-article article").hide();$("#content-article").find("article.seasons").fadeIn(500)}}if(e.currentTarget.id=="booknow"){var select=$("#option");var tour;tour=$.trim($("#content-title > h1").text());if(e.currentTarget.className=="tr"){$("#option option[value='transport']").attr("selected",true);select[0].selectedIndex=1;$("#option").trigger("change");$(".chosen-select").trigger("chosen:updated")}else{$("#option option[value='tour']").attr("selected",true);select[0].selectedIndex=0;$("#Activitie option[value='"+tour+"']").attr("selected",true);$("#option").trigger("change");$(".chosen-select").trigger("chosen:updated")}if($("#reservationbox #dialog").css("display")=="none"){$(".window").fadeOut(200);$("#reservationbox #dialog").fadeIn(200)}}});$(".team .detail").on("click",function(e){if($("#content-article").find("#"+e.currentTarget.id+" + div.description-person").css("display")=="none"){$(".description-person").hide();$("#content-article").find("#"+e.currentTarget.id+" + div.description-person").fadeIn(500)}else $("#content-article").find("#"+e.currentTarget.id+" + div.description-person").hide()});$(".opactivities .detail").on("click",function(e){if($("#content-article").find("#"+e.currentTarget.id+" + div.description-activitie").css("display")=="none"){$(".description-activitie").hide();$("#content-article").find("#"+e.currentTarget.id+" + div.description-activitie").fadeIn(500)}else $("#content-article").find("#"+e.currentTarget.id+" + div.description-activitie").hide()});$(".AM .detail-title").on("click",function(e){if($("#content-article").find("#"+e.currentTarget.id+" + div.description-day").css("display")=="none"){$(".description-day").hide();$("#content-article").find("#"+e.currentTarget.id+" + div.description-day").fadeIn(500)}else $("#content-article").find("#"+e.currentTarget.id+" + div.description-day").hide()});$(".SF .detail-subtitle").on("click",function(e){if($("#content-article").find("#"+e.currentTarget.id+" + div.description-season").css("display")=="none"){$(".description-season").hide();$("#content-article").find("#"+e.currentTarget.id+" + div.description-season").fadeIn(500)}else $("#content-article").find("#"+e.currentTarget.id+" + div.description-season").hide()});$("#logo").hover(function(){$("#logo #legenda").stop().animate({top:"10px"},500,"easeOutBounce")},function(){$("#logo #legenda").stop().animate({top:"-24px"},500)});var ie7='<div id="i_explorer">'+'<div id="i_explorer_overlay"></div>'+'<div id="i_explorer_content">'+'<p class="first">Lo sentimos pero&hellip;</p>'+"<p>&#8212;Este sitio no soporta tu Internet Explorer 8 o 7.</p>"+'<p>&#8212;Te recomiendo actualizar a la version 9 en <a href="http://www.microsoft.com/latam/windows/internet-explorer/" target="_blank">este link</a></p>'+'<p>&#8212;Ademas te recomiendo usar <a href="https://www.google.com/intl/es/chrome/browser/?hl=es" target="_blank">Google Chrome</a> para una mejor experiencia.</p>'+"<p>&#8212;Gracias :)</p>"+"</div>"+"<div>";if($.browser.msie&&parseInt($.browser.version,10)<9){$("body").append(ie7)}});